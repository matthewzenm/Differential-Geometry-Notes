\chapter{Bundles and Sheaves}

In this chapter we generalize the construction of tangent bundle to obtain general vector bundles.
This will allow us to define tensors, an important class of functions on smooth manifolds.
Moreover, we will discuss sheaves and fiber bundles, which are two generalizations of vector bundles.

\section{Vector Bundles}

\subsection*{Definitions}

\begin{defn}
    A \emph{vector bundle} $E$ of rank $k$ over $M$ consists of two manifolds $E$ and $M$, a surjective smooth map $\pi:E\to M$ which satisfies:
    \begin{enumerate}[(1)]
        \item For each $p\in M$, there exists a neighborhood $U$ of $p$ such that there is a diffeomorphism $\varphi_U:\pi^{-1}(U)\to U\times\mathbb{R}^k$, the pair $(U,\varphi_U)$ is called a \emph{local trivialization}.
        \item The diffeomorphism above restricted on $\pi^{-1}(p)$ is a vector space isomorphism $\varphi_U|_{\pi^{-1}(p)}:\pi^{-1}(p)\xrightarrow{\sim}\{p\}\times\mathbb{R}^k$.
    \end{enumerate}
\end{defn}

\begin{eg}\label{eg2.1}
    \begin{enumerate}[(1)]
        \item We have \emph{trivial bundle} $M\times\mathbb{R}^k$.
        \item The tangent bundle $TM$ of a smooth manifold $M$ is a vector bundle of rank $n$.
        \item A vector bundle of rank $1$ is called a \emph{line bundle}.
        \item Infinite M\"{o}bius band $I\times\mathbb{R}$ with $(0,x)$ and $(1,-x)$ identified is a nontrivial line bundle over $\mathbb{S}^1$.
    \end{enumerate}
\end{eg}

\begin{defn}
    Let $\pi:E\to M$ and $\pi':E'\to M$ be two vector bundles, a smooth map $f:E\to E'$ is called a \emph{bundle map} if
    \begin{enumerate}[(1)]
        \item the following diagram is commutative
        \[\begin{tikzcd}
            E \ar[rr, "f"] \ar[rd, "\pi"'] & & E' \ar[ld, "{\pi'}"] \\
            \ & M, & \
        \end{tikzcd}\]
        \item $f$ restricted on fiber $f|_{\pi^{-1}(p)}:E|_{\pi^{-1}(p)}\to E'|_{(\pi')^{-1}(p)}$ is a linear transformation.
    \end{enumerate}
    An invertible bundle map is called an \emph{isomorphism} between bundles.
\end{defn}

Therefore we obtain the notion of category of vector bundles over $M$.
Moreover, we can define the sub-object in this category as Proposition~\ref{submanifold embedded}.

\begin{defn}
    Let $\pi:E\to M$ be a vector bundle, a submanifold $F\subset E$ is called a \emph{subbundle} if
    \begin{enumerate}[(1)]
        \item $\pi|_F:F\to M$ is a vector bundle;
        \item the inclusion $F\hookrightarrow E$ is a bundle map.
    \end{enumerate}
\end{defn}

At the end of this subsection, we provide a method to construct a vector bundle.

\begin{defn}
    Let $\pi:E\to M$ be a vector bundle, and $\{U_i,\varphi_i\}_{i\in I}$ be a cover of local trivializations.
    The \emph{transition functions} with respective to this cover is a collection of smooth maps $g_{ij}:=\varphi_j^{-1}\circ\varphi_i$ for all indices $i,j\in I$.
    Clearly $g_{ij}$ can be regard as a map $U_i\cap U_j\to\GL(k,\mathbb{R})$.
\end{defn}

\begin{prop}\label{transition function}
    Let $M$ be a manifold, $\{U_i\}_{i\in I}$ be an open cover of $M$.
    Given a collection of smooth maps $g_{ij}:U_i\cap U_j\to\GL(k,\mathbb{R})$ for any indices $i,j\in I$, which satisfy
    \begin{gather*}
        g_{ij}\cdot g_{ji}=I,\\
        g_{ij}\cdot g_{jk}\cdot g_{ki}=I,
    \end{gather*}
    then the cover together with the collection of maps determine a vector bundle of rank $k$ over $M$ with same transition functions with respective to the cover.
    The conditions on $\{g_{ij}\}$ is called \emph{cocycle condition}.
\end{prop}
\begin{proof}
    Let $E_i:=U_i\times R^k$, define
    \[E=\left.\bigsqcup_{i\in I}E_i\right/\sim,\]
    where the equivalence relation $(p,v)\in E_i\sim(q,w)\in E_j$ if and only if $p=q$ and $w=g_{ij}(v)$.
    It's easy to check this construction indeed gives a vector bundle, and clearly $g_{ij}$'s are the transition functions with respective to $\{U_i\}_{i\in I}$.
\end{proof}

\begin{eg}
    We revisit the vector bundles in Example~\ref{eg2.1}.
    \begin{enumerate}[(1)]
        \item Trivial bundle is given by single transition function $U_1=M$, $g_{11}=I$.
        \item Tangent bundle $TM$ of $M$.
        Let $\{U_i,\varphi_i\}$ be an atlas, then the transition functions are $g_{ij}=\varphi_j^{-1}\circ\varphi_i$, where we equip $\mathbb{R}^n$ with natural smooth structure.
        Then cocycle conditions are immediately verified.
        \item Line bundles.
        The transition functions of line bundles are nonzero real numbers, this hints us that we can define a group associated to line bundles over $M$ in some way.
        \item M\"obius bundle.
        Let $I_1,I_2$ be two intervals that cover $\mathbb{S}^1$, then $g_{12}$ is given by $-1$.
    \end{enumerate}
\end{eg}

The transition function approach to vector bundle allows us to define algebraic operations on vector bundles.
We will turn to this topic now.

\subsection*{Algebraic Operations}

We can migrate the methods to construct new vector spaces from old to vector bundles.

Let $E\to M$ and $F\to M$ be two vector bundles, with local trivialization cover $\{U_i\}_{i\in I}$ (up to a common refinement), and transition functions $\{g_{ij}\}$ and $\{h_{ij}\}$ with respective to this cover.
Assume $g_{ij}$ and $h_[ij]$ have matrix representation $A_{ij}$ and $B_{ij}$.
Then we have:

\noindent\emph{Direct sum}.
The bundle $E\oplus F\to M$ is given by transition functions $g_{ij}\oplus h_{ij}$.
In matrix form, the transition functions are
\[\begin{bmatrix}
    A_{ij} & 0 \\
    0 & B_{ij}
\end{bmatrix}.\]

\noindent\emph{Tensor product}.
The bundle $E\otimes F\to M$ is given by transition functions $g_{ij}\otimes h_{ij}$.
In matrix form, assume that $A_{ij}=[a_{ij}{}^\alpha_\beta]_{1\leq\alpha,\beta\leq k}$, then $A_{ij}\otimes B_{ij}$ has blocked form
\[\begin{bmatrix}
    a_{ij}{}^1_1B_{ij} & a_{ij}{}^2_1B_{ij} & \cdots & a_{ij}{}^k_1B_{ij} \\
    a_{ij}{}^1_2B_{ij} & a_{ij}{}^2_2B_{ij} & \cdots & a_{ij}{}^k_2B_{ij} \\
    \vdots & \vdots & \ddots & \cdots \\
    a_{ij}{}^1_kB_{ij} & a_{ij}{}^2_kB_{ij} & \cdots & a_{ij}{}^k_kB_{ij} \\
\end{bmatrix}.\]

\noindent\emph{Dual bundle}.
The bundle $E^*$ is given by transition functions $(g_{ij}^{-1})^t$.
We will explain the term ``dual'' later.

Using above algebraic operations, we can easy to define algebraic operation on the set of equivalence classes of line bundles over $M$.
\begin{prop}
    The set of equivalence classes of line bundles over $M$ can be made into a group, where the multiplication is given by $E\otimes F$, and the inverse is given by $E^*$.
    This group is called \emph{Picard group}, and denoted by $\operatorname{Pic}M$.
\end{prop}

\section{Sections}

Sections are the main tool to investigate vector bundles.

\begin{defn}
    Let $\pi:E\to M$ be a vector bundle, a \emph{section} of $E$ is a smooth map $s:M\to E$ with $\pi\circ s=\operatorname{id}_M$.
    The set of all sections of $E$ is denoted by $\Gamma(E)$.
\end{defn}

\begin{rem}
    In differential, or Riemannian geometry, we are particularly interested in the sections of tangent bundles, that is, vector fields.
    The notation above for vector fields coincides with the notation we introduced in Section~\ref{section linearization}.
\end{rem}

Clearly we have
\begin{prop}
    Let $E\to M$ be a vector bundle, then $\Gamma(E)$ is a $C^\infty(M)$-module, the scalar product is given pointwisely.
\end{prop}

Now we use transition functions to characterize sections.
\begin{prop}
    Let vector bundle $E\to M$ be defined by transition functions $\{g_{ij}\}$, then a section is equivalent to a collection of smooth functions $s_i:U_i\to\mathbb{R}^k$, which satisfies $s_j=g_{ij}s_i$ on each $U_i\cap U_j$.
\end{prop}
The proof is similar to Proposition~\ref{transition function}, just glue each local section.

We can use the local expression of sections to give a explanation of ``dual bundle''.
\begin{prop}
    Let $E\to M$ be a vector bundle, there is a natural bilinear paring $\langle\cdot,\cdot\rangle:E\times E^*\to C^\infty(M)$.
\end{prop}
\begin{proof}
    Let $E$ and $E^*$ have transition functions $\{g_{ij}\}$ and $\{(g_{ij}^{-1})^t\}$.
    Let $s=\{s_i\}\in\Gamma(E)$ and $t=\{t_i\}\in\Gamma(E^*)$ be sections, then we define
    \[\langle s,t\rangle|_{U_i}=s_i^tt_i.\]
    We must show $\langle s,t\rangle$ is well-defined.
    Consider $\langle s,t\rangle$ restricted on $U_i\cap U_j$, we have another expression
    \begin{align*}
        \langle s,t\rangle|_{U_i\cap U_j}&=s_j^tt_j\\
        &=(g_{ij}s_i)^t((g_{ij}^{-1})^tt_i)\\
        &=s_i^tg_{ij}^t(g_{ij}^{-1})^tt_i\\
        &=s_i^tt_i,
    \end{align*}
    hence $\langle s,t\rangle$ is well-defined.
\end{proof}

\section{Fiber Bundles and Principal Bundles}

In this and next sections we generalize vector bundle in two ways.
First, we replace the fiber of a vector space by arbitrary fiber, obtaining fiber bundle.
Moreoever, when the fiber is chosen to be Lie groups, we obtain principal bundles.

\begin{defn}
    A \emph{fiber bundle} with fiber $F$ consists of two manifolds $E$ and $M$, a surjective smooth map $\pi:E\to M$ which satisfies
    \begin{enumerate}[(1)]
        \item For each $p\in M$, there exists a neighborhood $U$ of $p$ such that there is a diffeomorphism $\varphi_U:\pi^{-1}(U)\to U\times F$, the pair $(U,\varphi_U)$ is called a \emph{local trivialization};
        \item The diffeomorphism above restricted on $\pi^{-1}(p)$ is a bijection $\varphi_U|_{\pi^{-1}(p)}:\pi^{-1}(p)\xrightarrow{\sim}\{p\}\times F$.
    \end{enumerate}
\end{defn}

\begin{eg}
    \begin{enumerate}[(1)]
        \item Any covering space is a fiber bundle with discrete fiber.
        \item Any vector bundle is a fiber bundle with fiber to be $\mathbb{R}^k$.
        \item We have the \emph{Hopf fibration}:
        \begin{align*}
            H_n:\mathbb{S}^{2n+1}&\to\mathbb{CP}^n\\
            (z^0,\cdots,z^n)&\mapsto[z^0,\cdots,z^n].
        \end{align*}
        This is a fiber bundle with fiber $\mathbb{S}^1$.
        In particular, when $n=1$, we have an explicit formula
        \begin{align*}
            H_1:\mathbb{S}^3&\to\mathbb{S}^2(1/2)\\
            (z,w)&\mapsto\left(z\bar{w},\frac{1}{2}\left(|w|^2-|z|^2\right)\right),
        \end{align*}
        where we regard $\mathbb{S}^2(1/2)\subset\mathbb{C}\oplus\mathbb{R}$.
        The radius $1/2$ is chosen to make $H_1$ a \emph{Riemannian submersion}, which will be explained this later.
    \end{enumerate}
\end{eg}

Now we discuss principal bundles.
\begin{defn}
    \begin{enumerate}[(1)]
        \item Let $f:M\to N$ be a smooth map, $G$ acts smoothly on $M$ and $N$.
        $f$ is called \emph{$G$-equivariant} if $f(gx)=gf(x)$.
        \item Let $G$ be a Lie group.
        A \emph{principal $G$-bundle} is a fiber bundle $\pi:P\to M$ with fiber $G$, together with a smooth left action of $G$ on $P$ and each local trivialization $\pi^{-1}(U)\to U\times G$ is $G$-equivariant, where $G$ acts on $U\times G$ by $g(x,h)=(x,gh)$.
    \end{enumerate}
\end{defn}

Principal bundles also have cocycle construction.
But instead of gluing $U\times\mathbb{R}^k$'S, principal bundles glue $U\times G$'s.
\begin{prop}
    A principal $G$-bundle $P$ over $M$ is equivalent to the following data:
    given an open cover $\{U_i\}$ of $M$, the collection of smooth maps $g_{ij}:U_i\cap U_j\to G$ which satisfies
    \begin{gather*}
        g_{ij}\cdot g_{ji}=e\\
        g_{ij}\cdot g_{jk}\cdot g_{ki}=e
    \end{gather*}
    determines a principal $G$-bundle uniquely.
\end{prop}

\begin{eg}
    \begin{enumerate}[(1)]
        \item Frame bundle $F(E)$ of a rank $k$ vector bundle $E\to M$.
        $F(E)$ is the submanifold of $E^{\oplus k}$ consisting of $k$-tuples $(e_1,\cdots,e_k)$ which give a basis over the base point.
        Locally $\pi^{-1}(U)$ is diffeomorphic to $U\times\GL(k,\mathbb{R})$, and has a natural action of $\GL(k,\mathbb{R})$, hence $F(E)$ is a principal $\GL(k,\mathbb{R})$-bundle.
        \item Principal $\GL(k,\mathbb{R})$ bundles.
        Using same transition functions, one can construct the corresponding rank $k$ vector bundle of the principal bundle.
        This gives a functor from the category of principal $\GL(k,\mathbb{R})$-bundles to the category of vector bundles of rank $k$, it is also a categorical equivalence, whose inverse is given by taking frame bundle, although we don't want to explain what all these mean.
    \end{enumerate}
\end{eg}

\section{Sheaves}

In this section we release the requirement of local trivializations being fiber preserving, obtaining sheaves.
But instead of defining sheaves like vector bundles, we adopt a modern definition.

\begin{defn}
    Let $X$ be a topological space, a \emph{presheaf} $\mathcal{F}$ of sets (abelian groups, rings, $A$-modules, etc.) over $X$ is an assignment of each open set $U$ a set (abelian group, ring, $A$-module, etc.) $\Gamma(\mathcal{F},U)$, called \emph{sections}, together with a collection of mappings (homomorphisms) $r^U_V:\Gamma(\mathcal{F},U)\to\Gamma(\mathcal{F},V)$ for open sets $V\subset U$, called \emph{restriction maps}, which satisfies
    \begin{enumerate}[(1)]
        \item $r^U_U=\operatorname{id}_U$;
        \item $r^U_W=r^V_W\circ r^U_V$ provided $W\subset V\subset U$.
    \end{enumerate}
    If $s\in\Gamma(\mathcal{F},U)$ and $V\subset U$, $r^U_V(s)$ is usually denoted by $s|_V$.
    The set $\Gamma(\mathcal{F},X)$ is called \emph{global section}, usually denoted by $\Gamma(\mathcal{F})$.
\end{defn}

\begin{defn}
    Let $\mathcal{F}$ be a presheaf over $X$.
    $\mathcal{F}$ is called a \emph{sheaf} if it additionally satisfies the following \emph{sheaf axioms}:
    \begin{enumerate}[(1)]
        \item Given an open cover $\{U_i\}$ of $U\subset X$, if $s,t\in\Gamma(\mathcal{F},U)$ satisfy $s|_{U_i}=t|_{U_i}$ for any $i$, then $s=t$;
        \item Given an open cover $\{U_i\}$ of $U\subset X$, if $s_i\in\Gamma(\mathcal{F},U_i)$ satisfy $s_i|_{U_i\cap U_j}=s_j|_{U_i\cap U_j}$ for any $i,j$, then there exists an $s\in\Gamma(\mathcal{F},U)$ such that $s|_{U_i}=s_i$.
    \end{enumerate}
\end{defn}

\begin{eg}
    \begin{enumerate}[(1)]
        \item Let $M$ be a smooth manifold, we define the \emph{sheaf of germs of smooth functions} $C^\infty_M$ by
        \[\Gamma(C^\infty_M,U)=\{f:U\to\mathbb{R}:\ f\text{ is smooth}\}.\]
        Then $C^\infty_M$ is clearly a sheaf with evident restriction map.
        \item Let $E\to M$ be a topological vector bundle, that is, the local trivializations are homeomorphisms and sections are merely continuous mappings.
        Then we have a sheaf associated to $E$ with (use same symbol)
        \[\Gamma(E,U)=\{s:U\to E|\ \pi\circ s=\operatorname{id}_U\}.\]
        $E$ has evident restriction map.
        The notation for global section of sheaf $E$ conincides with the notation of vector bundle $E$.
        \item We give an example of a presheaf which is not a sheaf.
        Let $X=X_1\sqcup X_2$ with $X_1,X_2$ open.
        Define $\Gamma(\mathcal{F},U)=\mathbb{Z}_2$ for any $U\neq\varnothing\subset X$, $\Gamma(\mathcal{F},\varnothing)=\{0\}$, the restriction maps are taken to be identity maps for nonempty open sets, and $r^U_\varnothing$ is the zero homomorphism.
        Then $\mathcal{F}$ is a presheaf.
        But take $0\in\Gamma(\mathcal{F},X_1)$, $1\in\Gamma(\mathcal{F},X_2)$, we have
        \[0|_{X_1\cap X_2}=0|_\varnothing=0=1|_\varnothing=1|_{X_1\cap X_2},\]
        then by sheaf axiom, there exists $x\in\mathbb{Z}_2=\Gamma(\mathcal{F},X)$ such that $x|_{X_1}=0$, $x|_{X_2}=1$, this is impossible.
        Hence $\mathcal{F}$ is not a sheaf.
    \end{enumerate}
\end{eg}

\begin{defn}
    Let $\mathcal{F}$ be a presheaf over $X$, the \emph{germ} of $\mathcal{F}$ at $x$, denoted by $\mathcal{F}_x$, is
    \[\left.\bigsqcup_{x\in U\text{ open}}\Gamma(\mathcal{F},U)\right/\sim,\]
    where $s\in\Gamma(\mathcal{F},U)$ and $t\in\Gamma(\mathcal{F},V)$ are equivalent (i.e.\ $s\sim t$) if there exists $W\subset U\cap V$ such that $s|_W=t|_W$.

    We have a natural map $\Gamma(\mathcal{F},U)\to\mathcal{F}_x$ for $x\in U$, the image of $s$ under this natural map is denoted by $s_x$.
\end{defn}

\begin{rem}
    One can show that if $\mathcal{F}$ is a presheaf of abelian groups, rings, $A$-modules etc., then $\mathcal{F}_x$ carries the corresponding algebraic structure.
\end{rem}

\begin{defn}
    Let $\mathcal{F}$ be a presheaf over $X$.
    The \emph{\'etale space} $\et\mathcal{F}$ of $\mathcal{F}$ is defined as follows:
    as a set, we have
    \[\et\mathcal{F}=\bigsqcup_{x\in X}\mathcal{F}_x,\]
    and $\et\mathcal{F}$ carries the coarsest topology making the mapping
    \[s:x\mapsto s_x\]
    continuous for any $s\in\Gamma(\mathcal{F},U)$ and $U\subset X$ open.
    Denote $\pi:\et\mathcal{F}\to X$ to be the evident projection map.
\end{defn}

A little observation can tell that
\begin{prop}
    $\et\mathcal{F}$ has a basis $\{s(x)\in\mathcal{F}_x|\ x\in U,\ s(x)=s_x\text{ for }s\in\Gamma(\mathcal{F},U)\}$ for all $s\in\Gamma(\mathcal{F},U)$ and $U\subset X$ open.
\end{prop}

\begin{eg}
    \begin{enumerate}[(1)]
        \item Let $E\to M$ be a topological vector bundle, then $E$ is the \'etale space of the associated sheaf of $E$.
        \item Let $\mathcal{F}$ be a presheaf, we can define a \emph{sheaf} $\tilde{\mathcal{F}}$ by
        \[\Gamma(\tilde{\mathcal{F}},U)=\{s:U\to\et\mathcal{F}|\ \pi\circ s=\operatorname{id}_U,\ s\text{ is continuous}\}.\]
        The sheaf is called the \emph{sheafification} of $\mathcal{F}$.
    \end{enumerate}
\end{eg}

\subsection*{Continuation}

