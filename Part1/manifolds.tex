\chapter{Smooth Manifolds}

In this chapter we will introduce the basic object of differential geometry: smooth (or differentiable) manifolds and smooth maps.
In the meanwhile, we will introduce the main idea of differential geometry: linearization.
To be specific, we will introduce tangent spaces and tangent maps, i.e.\ the linearization of smooth maps.
The notion of manifolds with boundary and submanifolds will be discussed as well.

\section{Category of Smooth Manifolds}

Feel free if you know nothing about category theory, the section title just indicates we will define the notions of smooth manifolds and smooth maps.
Throughout the note, we will use ``smooth'' to mean being $C^\infty$.

We first have a topological object.
\begin{defn}
    Let $n\in\mathbb{N}$, a \emph{topological manifold} $M^n$ is a second countable Hausdorff space that is locally Euclidean, i.e.\ for any $p\in M$, there is an open neighborhood $U$ of $p$ and a map $\varphi_U:U\to\mathbb{R}^n$ that maps $U$ to an open set in $\mathbb{R}^n$ and homeomorphically onto its image.
    $(U,\varphi_U)$ is called a \emph{chart}.
    $n$ is called the \emph{dimension} of the manifold, denoted by $\dim{M}$.
    We will omit the superscript that indicates dimension if the dimension is clear.
\end{defn}

By gluing chart smoothly, we can have the notion of a smooth manifold.
\begin{defn}
    Let $M$ be a topological manifold, two charts $(U,\varphi_U)$ and $(V,\varphi_V)$ are called \emph{compatible} if both $\varphi_V\circ\varphi_U^{-1}$ and $\varphi_U\circ\varphi_V^{-1}$ are smooth.
    If compatible charts $\{(U_i,\varphi_i)\}$ consist an open cover of $M$, then it is called an \emph{atlas}.
    A maximal atlas is called a \emph{smooth structure}.
    A topological manifold together with a smooth structure is called a \emph{smooth manifold}.
\end{defn}

\begin{rem}
    \begin{enumerate}[(1)]
        \item Not all topological manifolds admit a smooth structure, see for isntance, \cite{Kervaire}.
        \item Dimension of manifolds are well-defined, that is, there is no diffeomorphisms between open subsets of $\mathbb{R}^m$ and $\mathbb{R}^n$ if $m\neq n$.
        The proof requires topological invariants, such as homology groups.
        See for instance, \cite[Theorem~2.55]{LeeTM}.
        \item We will assume all the manifolds occur in our note are path connected unless we specially claim.
        \item Notice that we only need to give an atlas of a manifold to define a smooth structure.
    \end{enumerate}
\end{rem}

We now present some examples of smooth manifolds.

\begin{eg}
    \begin{enumerate}[(1)]
        \item $\mathbb{R}^n$ itself is a smooth manifold, with single chart $\operatorname{id}$.
        \item Any open subset $U$ of a smooth manifold $M$.
        If $\{U_i,\varphi_i\}$ is an atlas of $M$, then $\{U_i\cap U,\varphi_i|_{U_i\cap U}\}$ is an atlas of $U$.
        In particular, any open set of $\mathbb{R}^n$ is a smooth manifold.
    \end{enumerate}
\end{eg}

\begin{eg}
    Sphere $\mathbb{S}^n=\{x\in\mathbb{R}^{n+1}:\ |x|=1\}$.
    An atlas is given by stereographic projections from north pole and south pole.
    We give the formula explicitly.
    Let $U=\mathbb{S}^n-\{(0,\cdots,0,1)\}$, $V=\mathbb{S}^n-\{(0,\cdots,0,-1)\}$, then
    \begin{gather*}
        U\xrightarrow{\varphi}\mathbb{R}^n,\ (x_1,\cdots,x_{n+1})\mapsto\left(\frac{x_1}{1-x_{n+1}},\cdots,\frac{x_n}{1-x_{n+1}}\right),\\
        V\xrightarrow{\psi}\mathbb{R}^n,\ (x_1,\cdots,x_{n+1})\mapsto\left(\frac{x_1}{1+x_{n+1}},\cdots,\frac{x_n}{1+x_{n+1}}\right).
    \end{gather*}
    It's easy to see $(U,\varphi)$ and $(V,\psi)$ are compatible.
\end{eg}

\begin{eg}
    \begin{enumerate}[(1)]
        \item If $M$, $N$ are smooth manifolds, then $M\times N$ is a smooth manifold with atlas $\{U_i\times V_j,\varphi_i\times\psi_j\}$, provided $\{U_i,\varphi_i\}$ and $\{V_j,\psi_j\}$ are atlases of $M$ and $N$ respectively.
        \item The torus $\mathbb{T}^n$ is defined by $\mathbb{S}^1\times\cdots\times\mathbb{S}^1$ for $n$ times.
    \end{enumerate}
\end{eg}

To complete the definition of category of smooth manifolds, we need to define smooth maps.
\begin{defn}
    A map $f:M\to N$ is called \emph{smooth} at $p\in M$, if there exists chart $(U,\varphi)$ of $p$ and $(V,\psi)$ of $f(p)$, such that $\psi\circ f\circ\varphi$ is smooth on $\varphi(U)$.
    If $f$ is smooth everywhere, we simply say $f$ is smooth.
    If $N=\mathbb{R}$, then we call $f$ a smooth \emph{function}, and we denote the set (actually $\mathbb{R}$-algebra) of smooth functions on $M$ by $C^\infty(M)$.
\end{defn}

The isomorphisms in the category of smooth manifolds are called diffeomorphisms, and we repeat the definition here.
\begin{defn}
    A smooth map $f:M\to N$ is called a \emph{diffeomorphism} if there exists a smooth $g:N\to M$, such that $g\circ f=\operatorname{id}_M$ and $f\circ g=\operatorname{id}_N$.
\end{defn}

At the end of the section, we discuss partition of unity.

\begin{defn}
    A collection of subsets $\{X_i\}_{i\in I}$ of topological space $X$ is called \emph{locally finite} if for any $x\in X$, there is a neighborhood $U$ of $x$ such that only finite many $i\in I$ satisfy $U\cap X_i\neq\varnothing$.
\end{defn}

\begin{defn}
    The \emph{support} of a smooth function $f\in C^\infty(M)$ is the closure of $\{p\in M:\ f(p)\neq 0\}$, denoted by $\supp{f}$.
\end{defn}

Now we can state the partition of unity theorem here, but we will not present the long and complicated proof.
For a proof, one can check~\cite[Theorem~2.23]{LeeSM}.

\begin{thm}[Partition of unity]
    Let $M$ be a smooth manifold with an open cover $\{U_i\}_{i\in I}$.
    Then there exists a family of smooth functions $\{\varphi_i\}_{i\in I}$ satisfying
    \begin{enumerate}[(1)]
        \item $0\leq\varphi_i\leq 1$;
        \item $\supp\varphi_i\subset U_i$ for each $i\in I$;
        \item $\{\supp\varphi_i\}_{i\in I}$ is locally finite;
        \item $\sum_{i\in I}\varphi_i(p)=1$ for $p\in M$.
    \end{enumerate}
\end{thm}

\begin{rem}
    By (3), the summation in (4) is a finite sum, so we will not encounter convergence problem here.
\end{rem}

Partition of unity plays an important role in defining many geometric objects, such as integral, metric, connection and so on.
But any of them is beyond our scope in this section, so we have to postpone the illustration of applications of partition of unity.

\section{Linearization}\label{section linearization}
In this section we discuss the linearization of smooth maps, the main idea of differential geometry.

\subsection*{Tangent Spaces and Tangent Maps}

We first define tangent spaces.
In modern textbooks, tangent vectors are defined to be derivatives on the germ of smooth functions.
This definition can show directly that tangent vectors consists a vector space.
However, we will adopt traditional definition via curves on manifolds, which will make our calculation more convenient.

\begin{defn}
    The \emph{germ of smooth functions} at $p\in M$ is a ring defined by
    \[\{(f,U)|\ U\subset M\text{ open, }f\in C^\infty(U)\}/\sim,\]
    where $(f,U)\sim(g,V)$ if there exists a $W\subset U\cap V$ such that $f|_W=g|_W$.
    Ring operations are defined in natural way.
    Elements in $C^\infty_p(M)$ are denoted by $f_p$ if it has representative element $f$.
\end{defn}

\begin{defn}
    Let $\gamma:[0,1]\to M$ be a smooth curve, i.e.\ a smooth map, with $\gamma(0)=p$.
    Define the \emph{tangent vector at $p$ along $\gamma$} to be a map
    \begin{align*}
        \dot\gamma(0):C^\infty_p(M)&\to\mathbb{R}\\
        f_p&\mapsto(f\circ\gamma)'(0).
    \end{align*}
    Then we define the \emph{tangent space at $p$} to be
    \[T_pM:=\{\dot\gamma(0)|\ \gamma:[0,1]\to M\text{ smooth, }\gamma(0)=p\}.\]
\end{defn}

\begin{rem}
    The assignment of curve to its tangent vector is not a bijection.
    For instance, on $T_0\mathbb{R}^2$, $y=0$ and $y-x^2=0$ yield same tangent vector at $(0,0)$.
\end{rem}

It's easy to see that
\begin{prop}
    We have \emph{Leibniz rule} 
    \[\dot\gamma(0)(f_pg_p)=f(p)\dot\gamma(0)(g_p)+g(p)\dot\gamma(0)(f_p).\]
    Therefore a tangent vector is a \emph{derivative} on $C^\infty_p(M)$.
\end{prop}

We will show that $T_pM$ has a real vector space structure.
In fact, we have an enhanced conclusion.
\begin{prop}\label{local tangent vector}
    Let $M^n$ be a smooth manifold, $(U,\varphi)$ be a chart containing $p$, $\varphi=(x^1,\cdots,x^n)$.
    Define $\left.\frac{\partial}{\partial{x^i}}\right|_p$ to be the tangent vector of $\sigma_i=\varphi^{-1}(\varphi(p)+te_i)$, where $e_i=(0,\cdots,1,\cdots,0)$ with only $i$-th component being $1$.
    Then we have
    \[T_pM=\Span\left\{\left.\frac{\partial{}}{\partial{x^i}}\right|_p\right\}\]
    as sets, so we can equip $T_pM$ a real vector space structure.
\end{prop}
\begin{proof}
    Notice that
    \[\left.\frac{\partial{}}{\partial{x^i}}\right|_pf=\frac{\partial}{\partial{x^i}}(f\circ\varphi^{-1})(p),\]
    the partial derivative on right hand side is the usual Euclidean partial derivative.
    Hence by chain rule, we have
    \begin{align*}
        \dot\gamma(0)f&=\left.\frac{\d{}}{\d{t}}\right|_{t=0}(f\circ\gamma)(t)\\
        &=\left.\frac{\d{}}{\d{t}}\right|_{t=0}(f\circ\varphi^{-1})\circ(\varphi\circ\gamma)(t)\\
        &=\left.\frac{\partial{}}{\partial{x^i}}\right|_{\varphi(p)}(f\circ\varphi^{-1})\left.\frac{\d{}}{\d{t}}\right|_{t=0}x^i(\gamma(t))\\
        &=\left.\frac{\d{}}{\d{t}}\right|_{t=0}x^i(\gamma(t))\left.\frac{\partial{}}{\partial{x^i}}\right|_pf.
    \end{align*}
    Therefore we have
    \[\dot\gamma(0)=\dot\gamma(0)(x^i)\left.\frac{\partial{}}{\partial{x^i}}\right|_p\in\Span\left\{\left.\frac{\partial{}}{\partial{x^i}}\right|_p\right\},\]
    and we obtain
    \[T_pM\subset\Span\left\{\left.\frac{\partial{}}{\partial{x^i}}\right|_p\right\}.\]
    The reverse inclusion is trivial.
\end{proof}

\begin{rem}
    The vector space structure of tangent space does not depend on the choice of chart, since for any charts $(U_1,\varphi_1)$ and $(U_2,\varphi_2)$, the Jacobian of transition function $\varphi_1\circ\varphi_2^{-1}$ is a vector space isomorphism.
    However, this is again rely on the well-definedness of dimension of manifolds, but we have assumed it automatically.
\end{rem}

\begin{eg}
    Let $M,N$ be smooth manifolds, and $(p,q)\in M\times N$.
    Then $T_{(p,q)}M\times N=T_pM\oplus T_qN$.
\end{eg}

Next we define tangent maps.
\begin{defn}
    Let $f:M\to N$ be a smooth map, $p\in M$.
    We define $f_{*p}:T_pM\to T_{f(p)}N$ by
    \[f_{*p}(v)(g)=v(g\circ f)\]
    for any $v\in T_pM$ and $g\in C^\infty_{f(p)}N$.
\end{defn}

\begin{rem}
    We often write $f_{*p}$ as $\d{f}|_p$ if $f$ is a smooth function.
    This coincides the notation for $1$-form we will define later.
\end{rem}

\begin{lem}
    On charts $(U,\varphi)$ of $p\in M$ and $(V,\psi)$ of $q\in N$, the smooth map $f:M\to N$ that $f(p)=q$ satisfies
    \[f_{*p}\left(\left.\frac{\partial{}}{\partial{x^i}}\right|_p\right)=\frac{\partial{}}{\partial{x^i}}(\psi\circ f\circ\varphi)^j(\varphi(p))\left.\frac{\partial{}}{\partial{y^j}}\right|_q.\]
\end{lem}
The proof is similar to Proposition~\ref{local tangent vector}.

Moreover, we have the chain rule.
\begin{prop}
    Let $f:M\to N$, $g:N\to P$ be two smooth maps, then for $p\in M$ we have
    \[(g\circ f)_{*p}=g_{*f(p)}\circ f_{*p}.\]
\end{prop}
\begin{proof}
    Let $v\in T_pM$, then for any $\varphi\in C^\infty_{g(f(p))}(M)$ we have
    \begin{align*}
        (g\circ f)_{*p}(v)(\varphi)&=v(\varphi\circ(g\circ f))\\
        &=v((\varphi\circ g)\circ f)\\
        &=(f_{*p}(v))(\varphi\circ g)\\
        &=(g_{*f(p)}(f_{*p}(v)))(\varphi)\\
        &=(g_{*f(p)}\circ f_{*p})(v)(\varphi).\qedhere
    \end{align*} 
\end{proof}

Since we linearize smooth maps, we can talk about rank of a map at a point.
\begin{defn}
    Let $f:M\to N$ be a smooth map and $p\in M$, the \emph{rank} of $f$ at $p$, denoted by $\rank_p{f}$, is defined by the rank of $f_{*p}$.
\end{defn}

\begin{defn}
    Let $f:M^m\to N^n$ be a smooth map.
    \begin{enumerate}[(1)]
        \item Assume $m\leq n$, if $f_{*p}$ is injective for any $p\in M$, then we call $f$ an \emph{immersion}.
        \item Assume $f$ is an immersion, if $f$ maps $M$ homeomorphically onto its image, then we call $f$ an \emph{embedding}.
        \item Assume $m\geq n$, if $f_{*p}$ is surjective for any $p\in M$, then we call $f$ a \emph{submersion}.
    \end{enumerate}
\end{defn}

\begin{rem}
    An equivalent description for immersion and submersion is that they are of constant maximal rank.
    Also notice that a map is both an immersion and submersion if and only if it is a diffeomorphism.
\end{rem}

\begin{eg}
    The definition of embedding $f:M\to N$ asks $f(M)$ is equipped with subspace topology from $N$, so $f$ being injective is not enough.
    For example, consider the injective map
    \[r:(-\pi,\pi)\to\mathbb{R}^2,\ t\mapsto(2\sin{t},\sin(2t)).\]
    The image of $r$ is the zero locus of $4y^2=x^2(4-x^2)$, it's easy to see it is compact.
    But $(-\pi,\pi)$ is not compact, hence $r$ does not map the interval homeomorphically onto its image.
\end{eg}

\subsection*{Tangent Bundles and Vector Fiels}

We want to collect the tangent spaces and tangent maps together to obtain a global linearization.
\begin{defn}
    Assume smooth manifold $M^n$ has atlas $\{U_\alpha,\varphi_\alpha\}$, define
    \begin{gather*}
        TM:=\bigsqcup_{p\in M}T_pM\\
        \pi:TM\to M,\ (p,v)\mapsto p
    \end{gather*}
    We give an atlas of $TM$ to make it into a $2n$-dimensional smooth manifold.
    Let
    \begin{align*}
        \Phi_\alpha&:\bigsqcup_{p\in U_\alpha}T_pM\to\mathbb{R}^{2n}\\
        &(p,v)\mapsto(\varphi_\alpha(p),(v^1,\cdots,v^n))
    \end{align*}
    where $v=v^i\left.\frac{\partial{}}{\partial{x^i}}\right|_p$.
    Let's check
    \begin{gather*}
        \Phi_\beta\circ\Phi_\alpha^{-1}:\varphi_{\alpha}(U_\alpha\cap U_\beta)\times\mathbb{R}^n\to\varphi_\beta(U_\alpha\cap U_\beta)\times\mathbb{R}^n\\
        (x^1,\cdots,x^n,v^1,\cdots,v^n)\mapsto\left(\varphi_\beta\circ\varphi_\alpha^{-1}(x),\frac{\partial(\varphi_\beta\circ\varphi_\alpha^{-1})^1}{\partial{x^i}}v^i,\cdots,\frac{\partial(\varphi_\beta\circ\varphi_\alpha^{-1})^n}{\partial{x^i}}v^i\right)
    \end{gather*}
    Clearly it is smooth, then $\{(\pi^{-1}(U_\alpha),\Phi_\alpha)\}$ induces a smooth structure on $TM$.

    We call $T_pM$ a \emph{fiber} over $p$, and $\pi:TM\to M$ the \emph{projection}.
\end{defn}

\begin{defn}
    A \emph{vector field} is a smooth map $X:M\to TM$ such that $\pi\circ X=\operatorname{id}_M$.
\end{defn}

We will use the symbol $\Gamma(TM)$ to denote the set (or in fact, $C^\infty(M)$-module) of vector fields.
The explanation for this symbol will be given after we introduced the notion of vector bundles.

\begin{prop}
    $X\in\Gamma(TM)$ if and only if in any local chart $(U,\varphi)$, we have $X(p)=X^i(p)\left.\frac{\partial{}}{\partial{x^i}}\right|_p$ for $X^i\in C^\infty(U)$, $i=1,2,\cdots,n$.
\end{prop}

\begin{rem}
    This proposition is equivalent to $X$ can be a mapping $C^\infty(M)\to C^\infty(M)$ defined by $Xf(p)=X(p)f$.
\end{rem}

We now provide some approaches to generate new vector fields.

\begin{defn}
    For $X,Y\in\Gamma(TM)$, define \emph{Lie bracket} of $X,Y$ as $[X,Y]=XY-YX$, then $[X,Y]\in\Gamma(TM)$.
\end{defn}
\begin{rem}
    We explain the definition more explicitly.
    If we act two vector fields on the product of two functions, we have
    \begin{align*}
        (XY)_p(fg)&=X_p(Y(fg))=X_p(gYf+fYg)\\
        &=\boxed{X_pg\cdot Y_pf+X_pf\cdot Y_pg}+g(p)X_pYf+f(p)X_pYg
    \end{align*}
    The boxed thing is bad, it spoils Leibniz rule.
    But if we substract $YX_p(fg)$, the boxed thing is cancelled.
    So $XY-YX\in\Gamma(TM)$.
\end{rem}

\begin{prop}
    On some local chart, we have $\left[\left.\frac{\partial{}}{\partial{x^i}}\right|_p,\left.\frac{\partial{}}{\partial{x^j}}\right|_p\right]=0$.
\end{prop}
\begin{proof}
    This is equivalent to mixed partial derivative is commutative for smooth functions in $\mathbb{R}^n$.
\end{proof}

Moreover, we can pass a vector field to another manifold via a diffeomorphism.

\begin{prop}
    Let $f:M\to N$ be a diffeomorphism and $X\in\Gamma(TM)$.
    Then there exists a vector field $Y\in\Gamma(TN)$ such that $Y=f_*X$, called the \emph{pushforward} of $X$.
\end{prop}
\begin{proof}
    Just define $Y$ pointwisely.
\end{proof}

\begin{prop}
    Let $f:M\to N$ be a diffeomorphism and $X,Y\in\Gamma(TM)$, then
    \[f_*[X,Y]=[f_*X,f_*Y].\]
\end{prop}
\begin{proof}
    Clear when considering the corresponding derivatives.
\end{proof}

\section{Submanifolds}

In this section, we discuss submanifolds of an ambient manifold.
We first present the definition.
Then, we will discuss rank theorem, a powerful tool to discuss submanifolds.
We will use rank theorem to derive inverse function theorem and implicit function theorem, and discuss submanifolds and embedded submanifolds.

\begin{defn}
    Let $M$ be a smooth manifold, $\Sigma\subset M$ be a subset.
    $\Sigma$ is called a \emph{($k$-dimensional) submanifold} of $M$ if for any $p\in\Sigma$, there exists a chart $(U,\varphi)$ of $p$ in $M$ such that 
    \[\varphi(U\cap\Sigma)=\varphi(U)\cap\{(x^1,\cdots,x^k,0,\cdots,0)\in\mathbb{R}^n|\ x^1,\cdots,x^k\in\mathbb{R}\}.\]
    We define the \emph{codimension} of $\Sigma$ to be $n-k$, denoted by $\codim\Sigma=n-k$.
\end{defn}

We will not linger to give any examples.
On the contrary, we will discuss rank theorem at once.

\begin{thm}[Rank theorem]
    Let $f:M^m\to N^n$ be a smooth map that has constant rank $r(\leq m)$.
    For any $p\in M$, there exists charts $(U,\varphi)$ of $p$ and $(V,\psi)$ of $f(p)$, such that
    \[(\psi\circ f\circ\varphi^{-1})(x^1,\cdots,x^r,\cdots,x^m)=(x^1,\cdots,x^r,0,\cdots,0)\]
    on $\varphi(U)$.
\end{thm}

The proof of rank theorem is also complicated, and we just refer to~\cite[Theorem~4.12]{LeeSM}.
Rank theorem has important applications.
First, as corollary, we have inverse function theorem and implicit function theorem.
\begin{thm}[Inverse function theorem]
    Let $f:M\to N$ be a smooth map, $p\in M$.
    Suppose $f_{*p}$ is an isomorphism, then there exists a neighborhood $U$ of $p$ such that $f|_U$ is an diffeomorphism on $U$.
\end{thm}
\begin{proof}
    Since determinant function is smooth, $\det{f_{*p}}\neq 0$ in a neighborhood of $p$.
    Then by rank theorem, there exists sufficiently small charts $(U,\varphi)$ of $p$ and $(V,\psi)$ of $f(p)$ such that $\psi\circ f\circ\varphi^{-1}$ is identity on $\varphi(U)$.
    Thus $f|_U=\psi^{-1}\circ\varphi$ is a homeomorphism, and it is a diffeomorphism since $f$ is smooth.
\end{proof}

\begin{thm}[Implicit function theorem]
    Let $f:M^{k+n}\to\mathbb{R}^k$ be a smooth map.
    Suppose $f_{*p}$ is a submersion for any $p\in f^{-1}(0)$, then $f^{-1}(0)$ is an $n$-dimensional submanifold of $M$ (may not be connected).
\end{thm}
\begin{proof}
    For $p\in f^{-1}(0)$, since determinant function is smooth, there exists a neighborhood of $p$ such that the tangent map has constant rank.
    Hence by rank theorem, there exists sufficiently small charts $(U,\varphi)$ of $p$ and $(V,\psi)$ of $0$ such that
    \[(\psi\circ f\circ\varphi^{-1})(x^1,\cdots,x^k,x^{k+1},\cdots,x^{k+n})=(x^1,\cdots,x^k).\]
    Then $f^{-1}(0)$ restricts on $U$ has coordinate
    \[\varphi(f^{-1}(0)\cap U)=\{(0,\cdots,0,x^{k+1},\cdots,x^{k+n})\in\mathbb{R}^{n+k}\}\cap\varphi(U).\]
    Thus $f^{-1}(0)$ is an $n$-dimensional submanifold.
\end{proof}
\begin{rem}
    \begin{enumerate}[(1)]
        \item The value $0$ plays an unimportant role in the proof.
        In fact, we can replace $0$ by $r_0$ and consider $g(x)=f(x)-r_0$.
        \item The condition of $f_{*p}$ being a submersion for any $p\in f^{-1}(r_0)$ is seemingly hard to verify.
        However, we will prove later that such property holds \emph{almost everywhere} in $\mathbb{R}$.
        (In fact, $\mathbb{R}^k$ for all $k\in\mathbb{N}$. This is Sard's Theorem, but we only need $k=1$ case in this note.)
    \end{enumerate}
\end{rem}

We now characterize submanifolds.
\begin{defn}
    Let $f:\Sigma\to M$ be an immersion, then the image of $f$ is called an \emph{immersed submanifold}.
    Moreover, if $f$ is an embedding, the image of $f$ is called an \emph{embedded manifold}.
\end{defn}

\begin{prop}
    Any immersed manifold is locally an embedded manifold.
\end{prop}
\begin{proof}
    Only need to show any immersion is locally an embedding, and this is clear from rank theorem.
\end{proof}

\begin{prop}\label{submanifold embedded}
    A subset of a smooth manifold is a submanifold if and only if it is an embedded submanifold.
\end{prop}
\begin{proof}
    Let $M$ be a smooth manifold, $S\subset M$ be a submanifold, then the inclusion $i:S\to M$ is an embedding.
    Conversely, let $f:\Sigma^k\to M^n$ be an embedding.
    Let $p\in f(\Sigma)$, $f(q)=p$, then by rank theorem, there exists charts $(U,\varphi)$ of $q$ and $(V,\psi)$ of $p$ such that
    \[(\psi\circ f\circ\varphi^{-1})(x^1,\cdots,x^k)=(x^1,\cdots,x^k,0,\cdots,0).\]
    Since $\Sigma\cong f(\Sigma)$ with latter equipped with subspace topology, $f(U)=\tilde{V}\cap f(\Sigma)$ for some open $\tilde{V}\subset M$.
    By shrinking $\tilde{V}$ (and $U$), we can assume $\tilde{V}\subset V$, then
    \[\psi(\tilde{V}\cap f(\Sigma))=\{(x^1,\cdots,x^k,0,\cdots,0)\in\mathbb{R}^n\}\cap\psi(\tilde{V}),\]
    hence $f(\Sigma)$ is a submanifold of $M$.
\end{proof}

Now we provide some examples of submanifolds.
\begin{eg}
    \begin{enumerate}[(1)]
        \item Open subsets of a smooth manifold.
        This is obvious.
        \item \emph{Surfaces} in $\mathbb{R}^3$.
        This means a submanifold of codimension $1$.
        In classical differential geometry, a surface means a $2$-dimensional immersed submanifold.
        That is, a smooth map $r:\Omega\subset\mathbb{R}^2\to\mathbb{R}^3$ with $r_{;1}\times r_{;2}\neq 0$.
        Generally, a submanifold of codimension $1$ (no matter what ambient manifold) is called a \emph{hypersurface}.
        \item \emph{Zero locus} of $f:M\to\mathbb{R}$ such that $f_{*p}$ has maximal rank for all $p\in f^{-1}(0)$.
        In particular, $n$-sphere $\mathbb{S}^n$ is the zero locus of $|x|^2-1=\sum_{i=1}^n(x^i)^2-1$.
        \item \emph{(Affine) algebraic manifolds}, i.e.\ \emph{smooth algebraic varieties}\footnote{Usually we only discuss algebraic varieties on algebraic closed fields, such as $\mathbb{C}$. But define varieties on arbitrary field does not violate the definition in algebraic geometry.}.
        Algebraic varieties are common zero locus of a family of polynomials $\{f^i\}_{i\in I}$.
        By Hilbert's basis theorem, we can assume the index set $I$ is finite (see for example, \cite[Theorem~B-1.16]{Rotman}).
        Hence we can have a differential smoothness condition that $f=(f^1,\cdots,f^{|I|})$ has maximal rank everywhere, instead of using commutative algebra.
    \end{enumerate}
\end{eg}

\section{Manifolds with Boundary}

A manifold with boundary is locally an upper half space.
First we difine the upper half space.

\begin{defn}
    The \emph{upper half space} $\mathcal{H}^n$ is defined as $\{(x^1,\cdots,x^n)\in\mathbb{R}^n|\ x^n\geq 0\}$ equipped with subpace topology.
    Denote the \emph{boundary} of $\mathcal{H}$, i.e.\ $\mathbb{R}^{n-1}\times\{0\}$, by $\partial\mathcal{H}^n$.
\end{defn}

Now we can define manifolds with boundary as a topological object.
\begin{defn}
    Let $n\in\mathbb{N}$, a \emph{(topological) manifold with boundary} $M^n$ is a second countable Hausdorff space that is locally $\mathcal{H}^n$, i.e.\ for any $p\in M$, there is an open neighborhood $U$ of $p$ and a map $\varphi_U:U\to\mathcal{H}^n$ that maps $U$ to an open set in $\mathcal{H}^n$ and homeomorphically onto its image.
    If $p$ is mapped to $\partial\mathcal{H}^n$, then we call $p$ a \emph{boundary point}, otherwise we call it an \emph{interior point}.
    We demand that the set of boundary points is nonempty.
\end{defn}

\begin{rem}
    The invariance of domain theorem~\cite[Theorem~2B.3]{Hatcher}~ensures that boundary points and interior points are well-defined.
\end{rem}

If we want to equip manifolds with boundary smooth structures, we need to extend our calculus to functions defined on arbitrary subsets of $\mathbb{R}^n$.

\begin{defn}
    Let $S\subset\mathbb{R}^n$ be an arbitrary subset, $f:S\to\mathbb{R}^m$ be a mapping.
    $f$ is called \emph{smooth} if for any $p\in S$, there is an open neighborhood $U$ of $p$ and $\tilde{f}:U\to\mathbb{R}^m$, such that $\tilde{f}$ is smooth at $p$ and $\tilde{f}|_S=f$.
\end{defn}

By this definition, we can carry the definition of smooth structures on manifolds without boundary verbatim to manifolds with boundary.

A simple observation shows
\begin{lem}
    Let $M^n$ be a smooth manifold with boundary.
    Then $\partial M$, i.e.\ the set of boundary points is an $n-1$-dimensional smooth manifold with induced smooth structure.
    A chart of $\partial M$ is a chart of $M$'s boundary point restricted to $\partial M$.
\end{lem}

\begin{rem}We have some remarks on manifolds with boundary.
    \begin{enumerate}[(1)]
        \item Topological boundary may not coincide with manifold boundary.
        Let $A=\{x\in\mathbb{R}^2:\ |x|<1\}$, then $A$ is a manifold without boundary, but its topological boundary is unit circle $\mathbb{S}^1$.
        \item $\partial M$ may not be connected even if $M$ is connected.
        For example, the cylinder $\mathbb{S}^1\times[0,1]$ has two disjoint circles as boundary.
    \end{enumerate}
\end{rem}

Next we discuss the tangent spaces on manifold with boundary.
If $p\in M-\partial M$, then $T_pM$ is the ordinary tangent space.
We need to figure out what $T_pM$ is when $p\in\partial M$.

\begin{prop}\label{I_pM}
    Let $I_pM$ be the set of all tangent vectors along a curve start from $p\in\partial M$.
    Then $I_pM=T_p\partial M\times\mathbb{R}_{\geq 0}$ as sets.
\end{prop}
\begin{proof}
    Use same calculation in Proposition~\ref{local tangent vector}, we have
    \[\dot\gamma(0)=\dot\gamma(0)(x^i)\left.\frac{\partial}{\partial{x^i}}\right|_p,\]
    where $\{\partial/\partial{x^i}\}$ consists a basis for $T_p\partial M$, and $\partial/\partial{x^n}$ is the tangent vector along $\sigma^n(t)=\varphi^{-1}(\varphi(p)+te_n)$.
    Since $\varphi$ maps a neighborhood of $p$ to the neighborhood of $\varphi(p)$ on $\mathcal{H}^n$, we have $x^n\geq 0$.
    Hence
    \[\dot\gamma(0)(x^n)=\lim_{t\to 0^+}\frac{x^n(\sigma(t))}{t}\geq 0,\]
    and the result follows.
\end{proof}

\begin{defn}
    Let $M$ be a smooth manifold with boundary, $p\in\partial M$.
    Then we define the \emph{tangent space} at $p$ to be $T_pM:=\Span{I_pM}$.
    If a nonzero tangent vector in $T_pM-T_p\partial M$ is a tangent vector along some curve, then we call it an \emph{inward-pointing vector}, otherwise we call it an \emph{outward-pointing vector}.
\end{defn}

From Proposition~\ref{I_pM}, we have the following lemma.
\begin{lem}
    A nonzero tangent vector at a boundary point $p$ is either in $T_p\partial M$, or inward-pointing, or outward-pointing.
\end{lem}

\section{Lie Groups}

We first introduce the notion of Lie groups, which lie in the intersection of geometry, algebra and analysis.
Moreover, we will use Lie groups to discuss the quotient manifolds.

An abstract nonsense definition for Lie groups is they are group objects in the category of smooth manifolds.
We want to write the definition explicitly.
\begin{defn}
    A group $G$ is called a \emph{Lie group} if $G$ has a (not necessarily connected) smooth manifold structure and the map $G\times G\to G$, $(g,h)\mapsto gh^{-1}$ is smooth.
\end{defn}

More generally, we have the notion of Lie algebras.
\begin{defn}
    A \emph{Lie algebra} is a real vector space $V$ equipped with a bilinear form $[\cdot,\cdot]$, satisfying
    \begin{enumerate}[(1)]
        \item $[v,v]=0$ for $v\in V$;
        \item $[u,[v,w]]+[v,[w,u]]+[w,[v,u]]=0$ for $u,v,w\in V$ (Jacobi identity).
    \end{enumerate}
\end{defn}

\begin{eg}\label{Jacobi identity for vector fields}
    The real vector space $\Gamma(TM)$ with Lie bracket is a Lie algebra.
    We only need to verify Jacobi identity.
    We have
    \begin{gather*}
        [X,[Y,Z]]=XYZ-XZY-YZX+ZYX\\
        [Y,[Z,X]]=YZX-YXZ-ZXY+XZY\\
        [Z,[X,Y]]=ZXY-ZYX-XYZ+YXZ,
    \end{gather*}
    add all three equations and we see all derivatives are cancelled.
\end{eg}

An important Lie algebra is the Lie algebra associated to a Lie group.

\begin{defn}
    Let $G$ be a Lie group, a vector field $X\in\Gamma(TG)$ is called \emph{left invariant} if for any left translation $L_g:h\mapsto gh$, we have $(L_g)_*X=X$.
\end{defn}

\begin{prop}
    Left invariant vector fields consist a Lie algebra.
\end{prop}
\begin{proof}
    Clearly left invariant vector fields consist a real vector space.
    We need to show $[X,Y]$ is left invariant provided $X,Y$ left invariant, then the Jacobi identity holds automatically.
    But this is because 
    \[(L_g)_*[X,Y]=[(L_g)_*X,(L_g)_*Y]=[X,Y].\qedhere\]
\end{proof}

\begin{prop}
    The vector space of left invariant vector fields is isomorphic to $T_eG$.
    Moreover, we can make $T_eG$ a Lie algebra.
\end{prop}
\begin{proof}
    Let $X$ be a left invariant vector field.
    For any $g\in G$, we have
    \[(L_{g^{-1}})_{*g}X|_g=X|_e,\]
    hence the value of $X$ is determined by its value at $e$.
    This gives the isomorphism.
    With this isomorphism, we can carry the Lie algebra structure to $T_eG$.
\end{proof}

\begin{defn}
    We define the \emph{Lie algebra of Lie group} $G$ by $T_eG$ equipped with Lie algebra structure.
    The Lie algebra of $G$ is denoted by $\mathfrak{g}$.
\end{defn}

We give some examples of Lie groups and Lie algebras.

\begin{eg}
    If a group is at most countable, we often equip it with discrete topology, and regard it as a $0$-dimensional manifold.
    Hence they are Lie groups.
    $\mathbb{Z}$ and $\mathbb{Z}_n$ are prototypes of these groups.
\end{eg}

\begin{eg}\label{linear group 1}
    \emph{Real general linear group} $\GL(n,\mathbb{R})$ and its subgroups.
    $\GL(n,\mathbb{R})$ is the preimage of open set $\mathbb{R}-\{0\}$ under determinant function, hence is open in $\mathbb{R}^{n\times n}$.
    Thus $\mathfrak{gl}(n,\mathbb{R})$ is isomorphic to $\mathbb{R}^{n\times n}$, with Lie bracket to be usual commutator $AB-BA$.
    \begin{enumerate}[(1)]
        \item \emph{Complex general linear group} $\GL(n,\mathbb{C})$.
        It is the preimage of open set $\mathbb{C}-\{0\}$ under determinant function, hence is open in $\mathbb{C}^n$.
        Thus $\mathfrak{gl}(n,\mathbb{C})$ is isomorphic to $\mathbb{R}^{2n^2}$.
        It can be embedded into $\GL(2n,\mathbb{R})$ by writing $a+b\sqrt{-1}$ as the matrix
        \[\begin{bmatrix}
            a & -b \\ b & a
        \end{bmatrix}.\]
        \item \emph{Real special linear group} $\SL(n,\mathbb{R})$.
        It is the zero locus of $A\mapsto(\det{A}-1)$.
        To figure out what $\mathfrak{sl}(n,\mathbb{R})$ is, we choose a curve $X(t)$ on $\SL(n,\mathbb{R})$ and $X(0)=I$, then
        \[0=(\det{X(t)})'=\det{X(t)}\tr(X(t)X'(t)),\]
        take $t=0$ we have $\tr{X'(0)}=0$, this means $\mathfrak{sl}(n,\mathbb{R})$ is the vector space of matrices with vanishing trace, which has dimension $n^2-1$.
        \item \emph{Complex special linear group} $\SL(n,\mathbb{C})$.
        It is also the zero locus of $A\mapsto(\det{A}-1)$, by same argument above we know that $\mathfrak{sl}(n,\mathbb{C})$ is the vector space of complex matrices with vanishing trace, which has real dimension $2n^2-2$.
    \end{enumerate}
\end{eg}

\begin{eg}\label{linear group 2}
    Automorphisms of bilinear forms.
    \begin{enumerate}[(1)]
        \item The automorphism group of standard real inner product on $\mathbb{R}^n$, that is $(v,w)\mapsto v^tw$, is defined to be \emph{orthonormal group}, denoted by $\mathrm{O}(n)$.
        This group can be characterized by
        \[\mathrm{O}(n)=\{X\in\GL(n,\mathbb{R}):\ X^tX=I\}.\]
        To figure out what $\mathfrak{o}(n)$ is, we choose a curve $X(t)$ on $\mathrm{O}(n)$ with $X(0)=I$.
        Then
        \[0=(X(t)^tX(t))'=X(t)^tX'(t)+X'(t)^tX(t),\]
        let $t=0$, we obtain $X'(0)^t+X'(0)=0$.
        This means $\mathfrak{o}(n)$ is the vector space of antisymmetric matrices, hence $\dim\mathfrak{o}(n)=\frac{n(n-1)}{2}$.
        \item The subgroup of $\mathrm{O}(n)$ with determinant $1$ is called the \emph{special orthonormal group}, denoted by $\SO(n)$.
        It is a component of $\mathrm{O}(n)$, hence $\mathfrak{so}(n)=\mathfrak{o}(n)$.
        \item The automorphism group of standard Hermitian inner product on $\mathbb{C}^n$, that is $(v,w)\mapsto \bar{v}^tw$, is defined to be \emph{unitary group}, denoted by $\mathrm{U}(n)$.
        It can be characterized by
        \[\mathrm{U}(n)=\{X\in\GL(n,\mathbb{C}):\ \bar{X}^tX=0\}.\]
        Use the same argument above we can show that $\mathfrak{u}(n)=\{X\in\mathbb{C}^{n\times n}:\ \bar{X}^t+X=I\}$.
        Hence $\dim\mathfrak{u}(n)=n^2$.
        \item The subgroup of $\mathrm{U}(n)$ with determinant $1$ is called the \emph{special unitary group}, denoted by $\SU(n)$.
        By the very definition we know that $\SU(n)=\mathrm{U}(n)\cap\SL(n,\mathbb{C})$, hence $\mathfrak{su}(n)$ is the matrices in $\mathfrak{u}(n)$ with vanishing trace, hence has real dimension $n^2-1$.
        \item The automorphism group of Lorentz bilinear form on $\mathbb{R}^{n,1}$, that is the bilinear form of $L=\operatorname{diag}{(1,\cdots,1,-1)}$ and preserves upper half space, denoted by $\mathrm{O}^+(n,1)$.
        We will not meet the Lie algebra of $\mathrm{O}^+(n,1)$ generally.
    \end{enumerate}
\end{eg}

\begin{rem}
    The Lie groups in Example~\ref{linear group 1}~and~\ref{linear group 2}~are called \emph{linear groups}, since they are subgroups of general linear group $\GL(n,\mathbb{R})$.
\end{rem}

\section{Quotient Manifolds}

We first review the notion of group actions.
\begin{defn}
    A \emph{smooth (left) action} of group $G$ on smooth manifolds $M$ is a smooth map
    \begin{align*}
        G\times M&\to M\\
        (g,x)&\mapsto g\cdot x,
    \end{align*}
    which satisfies
    \begin{enumerate}[(1)]
        \item $e\cdot x=x$;
        \item $(hg)\cdot x=h\cdot(g\cdot x)$ for $g,h\in G$.
    \end{enumerate}
    Sometimes we omit the dot and simply write $gx$.
    The \emph{orbit} of $x\in M$ is the set $\{gx:\ g\in G\}$.
    The \emph{isotropy group} (or \emph{stabilizer}) of $x\in M$ is the subgroup $G_x:=\{g\in G:\ gx=x\}$.
\end{defn}

Group actions give rise to quotient manifolds.
\begin{defn}
    Let a Lie group $G$ acts smoothly on a manifold $M$, we define the \emph{quotient space} $M/G$ by collecting all orbits, and equip $M/G$ the finest topology to make $\pi:M\to M/G$ continuous.
\end{defn}

Next we discuss when the quotient space of a smooth manifold admits a smooth manifold structure.
\begin{defn}Let group $G$ has a smooth action of $M$.
    \begin{enumerate}[(1)]
        \item The action is called \emph{proper} if for any $x,y\in M$ with $y$ not in the orbit of $x$, there exists two neighborhood $U$ and $V$ of $x$ and $y$ such that $gU\cap V=\varnothing$ for all $g$.
        \item The action is called \emph{free} if $gx=x$ for some $x\in M$ implies $g=\operatorname{id}$.
    \end{enumerate}
\end{defn}

\begin{thm}
    Let Lie group $G$ has a smooth, proper and free action of $M$.
    Then the quotient space $M/G$ is a topological manifold with $\dim(M/G)=\dim{M}-\dim{G}$.
    Moreover, $M/G$ has a unique smooth structure that makes $\pi:M\to M/G$ a smooth submersion.
\end{thm}

The proof is very complicated, please see~\cite[Theorem~21.10]{LeeSM}.

We now give some examples of quotient manifolds.
\begin{eg}
    If $G$ is discrete, then $\pi:M\to M/G$ is a covering.
    \begin{enumerate}[(1)]
        \item $\mathbb{RP}^n=\mathbb{S}^n/\mathbb{Z}_2$, where the nontrivial element in $\mathbb{Z}_2$ corresponds to the antipodal map.
        \item $\mathbb{S}^1=\mathbb{R}/2\pi\mathbb{Z}\cong\mathbb{R}/\mathbb{Z}$, $2\pi\mathbb{Z}$ acts on $\mathbb{R}$ by addition.
        \item $\mathbb{T}^n=\mathbb{R}^n/\mathbb{Z}^n$.
        This is equivalent to the definition of $\mathbb{S}^1\times\cdots\times\mathbb{S}^1$ by third isomorphism theorem.
    \end{enumerate}
\end{eg}

\begin{eg}\label{model space forms}
    By algebra, if $G$ acts on $M$ transitively, then $M$ equals to $G/G_x$, $x\in M$.
    \begin{enumerate}[(1)]
        \item The isometry group of Euclidean space $\Isom{\mathbb{R}^n}$ is equal to the semidirect product $\mathrm{O}(n)\ltimes\mathbb{R}^n$, where $\mathbb{R}^n$ represent translations.
        Notice that $\mathrm{O}(n)$ fixes origin, hence $\mathbb{R}^n\cong\mathrm{O}(n)\ltimes\mathbb{R}^n/\mathrm{O}(n)$.
        \item Let $\mathbb{S}^n$ defined by $1$'s preimage of quadric form $\sum_{i=1}^{n+1}(x^i)^2$, its automorphism group $\mathrm{O}(n+1)$ acts naturally on $\mathbb{S}^n$.
        Notice that $\mathrm{O}(n)$ acting on first $n$ coordinates fixes $(0,\cdots,0,1)$, hence $\mathbb{S}^n=\mathrm{O}(n+1)/\mathrm{O}(n)$.
        \item Let the hyperboloid defined by $-1$'s preimage of quadric form $\sum_{i=1}^n(x^i)^2-(x^{n+1})^2$ and taking upper component, its automorphism group $\mathrm{O}^+(n,1)$ acts naturally on it.
        Notice that $\mathrm{O}(n)$ acting on first $n$ coordinates fixes $(0,\cdots,0,1)$, hence the upper component of  hyperboloid is diffeomorphic to $\mathrm{O}^+(n,1)/\mathrm{O}(n)$.
    \end{enumerate}
    These three spaces are called \emph{space forms}.
    We will show in Riemannian geometry part that they have constant sectional curvature.
\end{eg}

\begin{eg}
    We give the example on real and complex Grassmannians.
    \begin{enumerate}[(1)]
        \item (Real) Grassmannians $\Gr(n,k)$ are the collection of all $k$-dimensional subspaces of $\mathbb{R}^n$.
        Let $V$ be a $k$-dimensional subspace of $\mathbb{R}^n$, then $\mathbb{R}^n$ splits into $V\oplus V^\perp$.
        Thus an isometry on $V$ and an isometry on $V^\perp$ acts separately, together fixes $V$.
        Hence $\Gr(n,K)$ has a smooth structure induced by $\mathrm{O}(n)/(\mathrm{O}(k)\times\mathrm{O}(n-k))$.
        In particular, $\Gr(n+1,1)$ is the $n$-dimensional projective space $\mathbb{RP}^n$.
        \item We can carry the same procedure to complex vector spaces.
        Hence we have complex Grassmannians are $\mathrm{U}(n)/(\mathrm{U}(k)\times\mathrm{U}(n-k))$.
        But one notices that even complex Grassmannians have complex structure, $\mathrm{U}(n)$ is never a complex manifold.
    \end{enumerate}
\end{eg}